package edu.practise.trip_planner.service.tour;import edu.practise.trip_planner.entities.Tour;import edu.practise.trip_planner.entities.TourPlace;import edu.practise.trip_planner.entities.User;import edu.practise.trip_planner.exceptions.TourNotFoundException;import edu.practise.trip_planner.exceptions.UserNotFoundException;import edu.practise.trip_planner.repository.PlaceRepository;import edu.practise.trip_planner.repository.TourRepository;import edu.practise.trip_planner.repository.UserRepository;import org.springframework.stereotype.Service;import java.util.List;@Servicepublic class TourServiceImpl implements TourService {    private final TourRepository tourRepository;    private final UserRepository userRepository;    private final PlaceRepository placeRepository;    public TourServiceImpl(TourRepository tourRepository, UserRepository userRepository, PlaceRepository placeRepository) {        this.tourRepository = tourRepository;        this.userRepository = userRepository;        this.placeRepository = placeRepository;    }    @Override    public Tour addTour(Tour tour) {        return tourRepository.save(tour);    }    @Override    public Tour addUserToTour(Long tourId, User user) {        Tour tour = tourRepository                .findById(tourId)                .orElseThrow(() -> new TourNotFoundException("The tour with id " + tourId + " doesn't found"));        tour.addUser(user);        return tourRepository.save(tour);    }    @Override    public Tour addPlaceToTour(Long tourId, TourPlace place) {        Tour tour = tourRepository                .findById(tourId)                .orElseThrow(() -> new TourNotFoundException("The tour with id " + tourId + " doesn't found"));        tour.addPlace(place);        return tourRepository.save(tour);    }    @Override    public void deleteTourById(Long id) {        tourRepository.deleteById(id);    }    @Override    public Tour editTourById(Long tourId, Tour tour) {        Tour editedTour = tourRepository                .findById(tourId)                .orElseThrow(() -> new TourNotFoundException("The tour with id " + tourId + " doesn't found"));        editedTour.setName(tour.getName());        editedTour.setUsers(tour.getUsers());        editedTour.setTourPlaces(tour.getTourPlaces());        return tourRepository.save(editedTour);    }    @Override    public Tour shareTourWithOtherUser(Long tourId, Long userId) {        User usr = userRepository                .findById(userId)                .orElseThrow(() -> new UserNotFoundException("The user with id " + tourId + " doesn't found"));        return addUserToTour(tourId, usr);    }    @Override    public Tour findTourById(Long id) {        return tourRepository                .findById(id)                .orElseThrow(() -> new TourNotFoundException("The user with id " + id + " doesn't found"));    }    @Override    public List<Tour> findAllTours() {        return tourRepository.findAll();    }}